# [WIP] DreamBBS v3 ç™¼ä½ˆèªªæ˜ Release Note

æœ¬æ–‡èªªæ˜ DreamBBS v3 çš„ä¸»è¦è®Šæ›´ã€‚\
This article explains the major changes made in DreamBBS v3.

## ç‰ˆæœ¬åç¨± Version Name

DreamBBS v3 (æˆ–ç¨± v3/3D.21) æ˜¯çºŒ DreamBBS v2 ç³»åˆ— (æˆ–ç¨± 3.12) çš„ä¸‹ä¸€å€‹ä¸»è¦ç™¼ä½ˆç‰ˆæœ¬ç³»åˆ—ã€‚\
DreamBBS v3 (also v3/3D.21) is the next major release series after DreamBBS v2 (also 3.12).

- (v2.1-gilgamesh-rc1 ğŸ“† 2019-12-17)
- v3.0: DreamBBS-202X v0-Azure
    - v3.0.0-alpha.1 ğŸ“† 2020-03-10
    - v3.0.0 ğŸ“† 2021-04-02
    - v3.0.1 ğŸ“† 2021-04-25
- v3.1: DreamBBS 3D-AO.21.1-VRMiliO
    - v3.1.0-rc.1 ğŸ“† 2022-01-01

## æ”¹è®Šèªªæ˜ Changes

æœ‰é—œå¾ v2.0 åˆ°æ­¤ç‰ˆæœ¬çš„æ”¹è®Šç´°ç¯€ï¼Œè«‹è¦‹æ­¤ç™¼ä½ˆç‰ˆæœ¬çš„è¨ˆç•«å°ˆæ¡ˆä¸­çš„å„å€‹ pull request çš„èªªæ˜ï¼š\
For details of changes from v2.0 until now, please refer to the description of pull requests of the project for this release:\
https://github.com/ccns/dreambbs/projects/4

æœ‰é—œå¿«é€Ÿéµçš„æ”¹è®Šï¼Œè«‹è¦‹ï¼š\
For hotkey changes, please refer to:\
https://github.com/ccns/dreambbs/wiki/VS-MapleBBS-3-Keyboard-zh_tw

ä»¥ä¸‹èªªæ˜å¾ v2.0 çš„é‡å¤§æ”¹è®Šã€‚\
The major changes from v2.0 are explained below.

### ä½¿ç”¨è€…ä»‹é¢æ”¹è®Š UI Changes

#### v2.1-rc1

+ ä½¿ç”¨è€…é–’ç½®æ™‚é–“ç²¾åº¦ç¾ç‚ºç§’ï¼Œå…¶é¡¯ç¤ºç¯„åœç¾æ¶µè“‹ 32 ä½å…ƒæ•´æ•¸ã€‚\
  The users' idle time now has the resolution of one second as well as the display range of 32-bit integer.

+ ç¾å·²é è¨­å•Ÿç”¨èŠå¤©å®¤ï¼›macro `HAVE_CHATROOM_CLIENT` å·²å»¢æ­¢ã€‚\
  The chatroom is now enabled by default; the macro `HAVE_CHATROOM_CLIENT` is no longer effective.

+ ç¾åœ¨èŠå¤©å®¤çš„èŠå¤©è¨Šæ¯ä¸€å¾‹æ¡ç”¨å‘æ–°è¨Šæ¯æ²å‹•çš„é¡¯ç¤ºæ–¹å¼ï¼›macro `M3_CHAT_SCROLL_MODE` å·²å»¢æ­¢ã€‚\
  Now the chat messages in the chatroom are always displayed as being scrolled toward the latest message; the macro `M3_CHAT_SCROLL_MODE` is no longer effective.

* ç¾åœ¨é€²å…¥èŠå¤©å®¤æ™‚ï¼ŒèŠå¤©æš±ç¨±æ¬„æœƒé å…ˆå¡«å…¥ä½¿ç”¨è€… IDï¼Œè€Œé€å‡ºç©ºæš±ç¨±å¯å–æ¶ˆé€²å…¥èŠå¤©å®¤ã€‚\
  Now, when the user enters the chatroom, the input field for the user's nickname in chatroom will be pre-filled with the user's ID, and sending an empty nickname cancels the entry.

+ ç¾åœ¨è¢« zapped æ‰çš„çœ‹æ¿åŠå…¶æ–‡ç« æœƒè¢«é¡¯ç¤ºç‚ºå·²è®€ã€‚\
  Zapped boards and all posts in them are now displayed as read.

+ æ”¹é€²äº†ç·¨è¼¯å™¨åœ¨ ANSI é è¦½æ¨¡å¼ä¸­ï¼Œå°ç·¨è¼¯æŒ‰éµçš„è™•ç†\
  Improve the handling of editing keys in ANSI preview mode in the editor

  å·²å¯åœ¨ç·¨è¼¯å™¨ä¸­çš„ ANSI é è¦½æ¨¡å¼ä¸­ç›´æ¥ä½¿ç”¨å€’é€€éµã€‚\
  Backspace can now be used directly in the ANSI mode in the editor.

  * (v3.0.0) å…¶å®ƒç·¨è¼¯æŒ‰éµä¹Ÿå·²æ”¹é€²ã€‚\
    (v3.0.0) Improvements have been made for other editing keys as well.

+ æ”¹é€²æ–‡ç« æ¨™é¡Œè‰²å½©çªé¡¯ç³»çµ± (`hdr_outs()`)\
  Improve the color-highlighting system for article titles (`hdr_outs()`)

  åŒ…å«ï¼š`[]`/`<>`/`{}` æ‹¬è™Ÿé…å°ã€ç¬¦åˆç›®å‰æ–‡ç« æ¨™é¡Œçš„æ–‡ç« çªé¡¯ã€(v3.0.0) å¢åŠ çªé¡¯ç¨®é¡ã€ç­‰ç­‰ã€‚\
  Including: Parenthesis pairing for `[]`/`<>`/`{}`, highlighting of articles with the matching title of the current article, (v3.0.0) new highlight types, etc.

  * (v3.0.0-alpha.1) ç¾åœ¨æ–‡ç« æ¨™é¡Œè‰²å½©çªé¡¯æœƒæ­£ç¢ºè™•ç†é›™ä½å…ƒçµ„å­—å…ƒã€‚\
    (v3.0.0-alpha.1) Now the color-highlighting of article titles correctly handles DBCS characters.

  * (v3.0.0) åŒæ™‚ä½¿ç›¸é—œç¨‹å¼ç¢¼æ›´ç°¡æ½”ä¸¦æ˜“è®€\
    (v3.0.0) Also improve the conciseness and readability of relevant codes

#### v3.0.0-alpha.1

+ ç¾åœ¨ç•¶çœ‹æ¿åˆ†é¡æ–‡å­—è‰²å½©è¨­å®šç‚ºé»‘è‰²æ™‚ï¼Œæœƒé¡¯ç¤ºç‚ºäº®é»‘è‰²ä»¥é¿å…çœ‹ä¸è¦‹ã€‚\
  Now, when the color of the board category text is set as black, it is displayed as bright black to prevent it from being invisible.

+ åŠ å¤§äº†ä½¿ç”¨è€…åå–®ä¸­çš„ã€Œæ•…é„‰ã€ï¼ˆä½¿ç”¨è€…çš„ç¶²éš›ç¶²è·¯åœ°å€è¨Šæ¯ï¼‰æ¬„ä½çš„æœ€å¤§å¯¬åº¦ã€‚è«‹ä½¿ç”¨å¯¬è¢å¹•çœ‹çœ‹ã€‚\
  The maximum width of the "homeland" (users' internet address information) field in the online user list has been increased. Please check it out with a wide screen.

+ å¢åŠ è‡ªå‹•ç”Ÿæˆçš„ç¨‹å¼ç‰ˆæœ¬èˆ‡ç·¨è­¯ç’°å¢ƒè³‡è¨Š\
  Add automatic generated program version and compilation environment information

  å¯å¾ BBS ä»‹é¢ä¸»é¸å–®é¸æ“‡ä»¥ä¸‹é¸é …ä»¥æŸ¥çœ‹ï¼š\
  To view it, please choose the following menu item from the main menu:
  - `(X)yz` (ç³»çµ±è³‡è¨Šå€ System Information Area)\
    -> `(X)info` (ç³»çµ±ç¨‹å¼è³‡è¨Š System Environment and Program Information)

  + (v3.1.0-rc.1) ç¾å¯æŸ¥çœ‹ `bbsd` æ˜¯å¦æœ‰æ›´æ–°ç‰ˆæœ¬ï¼ˆéœ€å•Ÿç”¨ DSO å‡½å¼åº«çš„ç†±æ’æ‹”ï¼‰\
    (v3.1.0-rc.1) It is now possible to check whether `bbsd` has a newer version (requires enabling hot swapping of DSO libraries).

+ ç¾åœ¨ä½¿ç”¨è€…ä¸Šç«™ç´€éŒ„çš„ IP åœ°å€æœƒè¢«å°æˆæ¨™æº–æ ¼å¼ï¼Œä¸¦ä¸”é€£ç·šé¡å‹åœ¨ç”± WebSocket é€£å…¥æ™‚æœƒé¡¯ç¤ºç‚º `WSP` (WebSocket Proxy)ã€‚\
  Now, in the user's login history, the IP is printed in the standard format, and the connection type is displayed as `WSP` (WebSocket Proxy) if the user connects via WebSocket.

  + (v3.1.0-rc.1) ä¸” Secure Shell é€£å…¥æ™‚æœƒé¡¯ç¤ºç‚º `SSH`ï¼Œä»¥ WebSocket Secure é€£å…¥æ™‚å‰‡ç‚º `WSS`ã€‚\
    (v3.1.0-rc.1) And displayed as `SSH` if the user connects via Secure Shell; `WSS` if the user connects via WebSocket Secure.

+ æ”¹é€²å¤šé‡é¸é …è¨­å®šä»‹é¢ï¼ˆ`bitset()`ï¼‰ï¼Œä¸¦é˜²æ­¢ä½¿ç”¨è€…æ›´æ”¹ç³»çµ±ä¿ç•™çš„è¨­å®š\
  Refine the UI of multiple selection setting (`bitset()`) and prevent the user from changing options reserved by the system

+ ä½¿ç”¨è€…ï¼ç‰ˆä¸»çš„è³‡æ–™æŸ¥è©¢èˆ‡è¨­å®šä»‹é¢ï¼ˆ`acct_setup()`/`bm_setup()`ï¼‰ï¼Œç¾åœ¨åœ¨é€å‡ºæŸ¥è©¢ç†ç”±å‰æœƒç¶­æŒéš±è—éš±ç§è³‡æ–™ï¼Œä¸¦ä¸”åœ¨æŸ¥è©¢å®Œç•¢å¾Œæœƒæ¸…é™¤ç•«é¢ã€‚\
  The UI for querying and setting user/board moderator (`acct_setup()`/`bm_setup()`) now hides the private information before the reason for querying is given and clears the screen when the query is done.

+ é¸æ“‡ä½¿ç”¨è€…ï¼ç³»çµ±æª”æ¡ˆä»¥ç·¨è¼¯çš„ä»‹é¢ï¼ˆ`x_file()`ï¼‰æ”¹ç‚ºä½¿ç”¨ä¸»é¸å–®å‡½å¼ (`domenu()`ï¼ŒåŸ `menu()`) å¯¦ä½œã€‚\
  The UI for choosing user/system files (`x_file()`) for editing is reimplemented with the main menu function (`domenu()`, formerly `menu()`).

+ å¯¦ä½œ pfterm çš„é»‘ç™½æ¨¡å¼\
  Implement the Black-and-White mode for pfterm

  å¯å¾ BBS ä»‹é¢ä¸»é¸å–®é¸æ“‡ä»¥ä¸‹é¸é …ä»¥ä½¿ç”¨åŠŸèƒ½ï¼š\
  To access this function, please choose the following menu item from the main menu:
  - `(D)Service` (æœå‹™å€ Service Area)\
    -> `(U)ser` (å€‹äººå·¥å…·å€ User Utilities)\
    -> `(C)onfigure` (è¨»å†ŠåŠè¨­å®šå€‹äººè³‡è¨Š Register and User Information Setting)\
    -> `(F)avorite` (å€‹äººå–œå¥½è¨­å®š User Preference)\
    -> `0 â–¡` (å½©è‰²æ¨¡å¼ Color Mode)

  ä¸¦ä½¿è©²é¸é …çš„åœ–æ¡ˆè®Šç‚ºç©ºå¿ƒ And make the icon for the option unfilled: `â–¡`

+ ç¾åœ¨ pfterm æ”¯æ´æ›´å¤šå½©ç¾å±¬æ€§ã€‚\
  pfterm now supports more render attributes.

  v2.0 å¼•é€²çš„ Virtual Attribute å·²æ›´åç‚º Cursor Attributeã€‚\
  The Virtual Attribute introduced in v2.0 has been renamed to Cursor Attribute.

  æœ‰é—œå®Œæ•´çš„æ–°å¢æ”¯æ´çš„å½©ç¾å±¬æ€§æ¸…å–®ï¼Œè«‹è¦‹ï¼š\
  For the complete list of newly supported render attributes, please refer to:\
  https://github.com/ccns/dreambbs/pull/61

+ å¼•é€² PttBBS å¼çš„å…‰æ£’é¸å–®ç³»çµ±\
  Introduce the PttBBS-style lightbar menu system

  å¯å¾ BBS ä»‹é¢ä¸»é¸å–®é¸æ“‡ä»¥ä¸‹é¸é …ä»¥å•Ÿç”¨ï¼š\
  To enable it, please choose the following menu item from the main menu:
  - `(D)Service` (æœå‹™å€ Service Area)\
    -> `(U)ser` (å€‹äººå·¥å…·å€ User Utilities)\
    -> `(C)onfigure` (è¨»å†ŠåŠè¨­å®šå€‹äººè³‡è¨Š Register and User Information Setting)\
    -> `(F)avorite` (å€‹äººå–œå¥½è¨­å®š User Preference)\
    -> `K â– ` (ä½¿ç”¨å…‰æ£’é¸å–®ç³»çµ± Enable Lightbar Menu System)

  ä¸¦ä½¿è©²é¸é …çš„åœ–æ¡ˆå¡«æ»¿ And make the icon for the option filled: `â– `

  å¦‚æœ pfterm æœªå•Ÿç”¨ï¼Œå‰‡æœ¬åŠŸèƒ½ç„¡æ•ˆã€‚\
  This feature is disabled when pfterm is not enabled.

+ ç¾åœ¨æ¨™é¡Œåˆ—çš„ä¸­å¤®æ¨™é¡Œæœƒå„˜å¯èƒ½å‘æ•´å€‹æ¨™é¡Œåˆ—çš„ä¸­å¤®ç½®ä¸­ã€‚\
  Now the middle title on the title bar is placed on the entire title bar as close to the center as possible.

+ è½‰ä¿¡è¨­å®šä»‹é¢æ”¹ç”¨ `xover()` å¯¦ä½œï¼Œå¯ä½¿ç”¨ Xover åˆ—è¡¨çš„é è¨­å¿«é€Ÿéµã€‚\
  The UI of internet article sending/receiving setting is reimplemented using `xover()`, so the default hotkeys of Xover list can be used.

+ é‡æ–°å¯¦ä½œ Xover åˆ—è¡¨çš„ footer é¡¯ç¤ºï¼Œæ”¹å–„ Xover å¿«é€Ÿè¨Šæ¯çš„é¡¯ç¤º\
  Reimplement the footer display in Xover list and refine the display of Xover quick messages

  ç¾åœ¨åŸ·è¡Œæœƒæ”¹è®Š footer æ‰€åœ¨æ©«è¡Œçš„é¡¯ç¤ºçš„æ“ä½œå¾Œï¼Œæœƒæ­£ç¢ºåœ°é‡ç¹ª footer äº†ã€‚\
  Now the footer is redrawn correctly after operations which alter the display of the row for the footer.

  ç¾åœ¨ Xover å¿«é€Ÿè¨Šæ¯å‡ºç¾æ™‚ï¼ŒæŒ‰ä»»æ„æŒ‰éµæœƒæ¸…é™¤æ­¤è¨Šæ¯ä¸¦é‡ç¹ªå› footerã€‚\
  Now, when the Xover quick messages appear, pressing any key causes the message to be cleared and the footer to be redrawn.

  å·²é‡æ–°å•Ÿç”¨ Xover åˆ—è¡¨æœ€å¾Œä¸€é ç‚ºæ»¿æ™‚çš„æ‰€é¡¯ç¤ºçš„è¨Šæ¯ï¼ˆ3.1.0-rc.1ï¼šè¨Šæ¯å·²æ”¹ç‚ºèˆ‡åŸç‰ˆ MapleBBS 3.10 ç›¸åŒï¼‰ã€‚\
  The message which appears when the last page of Xover list is full has been reenabled (3.1.0-rc.1: the message has been changed to be same as the original MapleBBS 3.10).

  * (3.1.0-rc.1) æ–°å¢åœ¨ Xover åˆ—è¡¨ä¸­ä½¿ç”¨ä¸»é¡Œå¼ç€è¦½æŒ‰éµï¼Œè€Œæ¸¸æ¨™å·²åœ¨ç›®æ¨™ä¸Šæ™‚çš„è¨Šæ¯\
    (3.1.0-rc.1) Add a new message for indicating that the cursor is already on the target when using thread browsing hotkeys in Xover list 

+ æ”¹å–„ `vget()` è¼¸å…¥æ¡†ç³»çµ±çš„æ­·å²ç´€éŒ„è™•ç†\
  Refine the history entry handling of the `vget()` input field system

  ä¸èƒ½å†å‘å¾Œè·³åˆ°ç©ºç™½ç´€éŒ„æˆ–å‘å‰è·³åˆ°æœ€èˆŠç´€éŒ„äº†ã€‚\
  It is no longer possible to jump backward to empty entries or jump forward to the oldest entry.

  å·²ç·¨è¼¯çš„æ–°è¼¸å…¥èˆ‡æ­·å²åœ¨å‰å¾Œåˆ‡æ›æ­·å²æ™‚æœƒè¢«å„²å­˜ï¼Œè€Œé€å‡ºç‚ºè¼¸å…¥çš„æ­·å²æœƒè®Šæˆæœ€æ–°çš„æ­·å²ã€‚\
  Edited new input and history entries are saved when switching between the history entry, and the history entry which sent as the input becomes the newest entry.

#### v3.0.0

+ ç¾åœ¨é–æ–‡æ™‚ï¼Œå¦‚æœæ²’æœ‰æ¿ä¸»æ¬Šé™è€Œä¸èƒ½è‡ªè¡Œè§£é–ï¼Œæœƒå…ˆé¡¯ç¤ºè­¦å‘Šè¨Šæ¯è¦ä½¿ç”¨è€…ç¢ºèªã€‚\
  Now a warning prompt displays when users try to lock their post but do not have the moderator permission to unlock the post.

+ ç¾åœ¨è¨±å¤šä»‹é¢æ”¯æ´åœ¨ç•«é¢å¤§å°æ”¹è®Šæ™‚é€²è¡Œç•«é¢è‡ªå‹•é‡ç¹ªï¼Œå¦‚ Xover åˆ—è¡¨ã€å½ˆå‡ºå¼é¸å–®ã€`vget()` è¼¸å…¥æ¡†ã€‚\
  Now many UIs support automatic redraws when the screen size is changed, e.g., Xover lists, the popup menu, and the `vget()` input fields.

  äº¦å¯æŒ‰ <kbd>Esc</kbd>-<kbd>Ctrl</kbd>-<kbd>L</kbd> æ‰‹å‹•é‡ç¹ªã€‚\
  <kbd>Esc</kbd>-<kbd>Ctrl</kbd>-<kbd>L</kbd> can be used for manual redraws if needed.

* ç¾åœ¨åœ¨ç·¨è¼¯å™¨ä¸­ï¼Œå…è¨±åœ¨ä¸€è¡Œå…§è¼¸å…¥æœ€å¤š 3986 å€‹ä½å…ƒçµ„é•·ï¼ˆå« ANSI æ§åˆ¶ç¢¼ï¼‰çš„æ–‡å­—ã€‚\
  Now, texts up to 3986 bytes long (including ANSI escapes) are allowed to be input on a single line in the editor.

  é¡¯ç¤ºç³»çµ±åŠç·¨è¼¯å™¨çš„å–®è¡Œç·©è¡å€å¤§å°ï¼ˆ`ANSILINESIZE`ï¼ŒåŸ `ANSILINELEN`ï¼‰å·²åŠ å¤§è‡³ 4000 å€‹ä½å…ƒçµ„ã€‚\
  The buffer size for a single line in the display system and the editor (`ANSILINESIZE`, formerly `ANSILINELEN`) has been increased to 4000 bytes.

+ å·²å¯¦ä½œä¼ºæœå™¨ç«¯é›™ä½å…ƒçµ„å­—å…ƒåµæ¸¬ã€‚\
  Server-side DBCS character detection is now implemented.

  åŒæ™‚ï¼ŒBBS ä½¿ç”¨è€…ç«¯æ‰€é€å‡ºçš„é›™ä½å…ƒçµ„å­—å…ƒæŒ‰éµè‡ªå‹•é‡è¤‡æœƒè¢«åµæ¸¬å‡ºä¸¦å¿½ç•¥ã€‚\
  Also, the auto repeats for DBCS character are detected and ignored.

  åœ¨ç·¨è¼¯å™¨ä¸­ï¼ŒEsc-r å¯æš«æ™‚é–‹é—œé›™ä½å…ƒçµ„å­—å…ƒåµæ¸¬ã€‚\
  In the editor, Esc-r can temporarily toggle DBCS character detection.

#### v3.0.1

* ä¸Šç«™äººæ•¸çµ±è¨ˆåœ–è¡¨å·²æ”¹é€²ï¼Œè§£æåº¦ç”± 16 å¢åŠ è‡³ 128ã€‚\
  The login count chart has been improved. The resolution has been increased from 16 to 128.

  ![](https://i.imgur.com/S8N5ZH1.png)
  ![](https://i.imgur.com/ClWSR47.png)

#### v3.1.0-rc.1

* å·²é è¨­ä½¿ç”¨æ–°å¼å¯†ç¢¼åŠ å¯†ç”¢ç”Ÿæ–°å¯†ç¢¼ã€‚\
  The generation of new passwords now defaults to use the new encryption.

â€¦â€¦ ä»¥åŠå…¶å®ƒç³»çµ±è¨Šæ¯çš„éŒ¯å­—èˆ‡èªæ³•ä¿®æ­£ (è©³è¦‹ commit ç´€éŒ„)\
â€¦â€¦ and other typo/grammar fixes for system messages (see commit log for details)

### éŒ¯èª¤ä¿®æ­£ Bug Fixes

#### v2.1-rc1

* ä¿®æ­£ä½¿ç”¨è€…çš„æ–‡ç« é–±è®€ç´€éŒ„ï¼ˆBRHsï¼‰æœƒå› ç‚º `memcpy()` åœ¨è¼ƒæ–°çš„ä½œæ¥­ç³»çµ±ä¸Šçš„æœªå®šç¾©è¡Œç‚ºè€Œæå£çš„å•é¡Œ\
  Fix users' article-reading record (BRHs) corrupted due to the undefined behavior of `memcpy()` on recent OSs

  * (v3.0.0) ä¿®æ­£å…¶å®ƒåŸ·è¡Œè³‡æ–™æœƒå› ç‚º `memcpy()` åœ¨è¼ƒæ–°çš„ä½œæ¥­ç³»çµ±ä¸Šçš„æœªå®šç¾©è¡Œç‚ºè€Œæå£çš„å•é¡Œ\
    (v3.0.0) Fix other runtime data corrupted due to the undefined behavior of `memcpy()` on recent OSs

* ä¿®æ­£ visio screen çš„ç•«é¢å‚™ä»½æ©Ÿåˆ¶åœ¨å¯¬ï¼é«˜è¢å¹•ä¸‹ä»¥åŠè¢å¹•å¤§å°è®Šæ›´æ™‚ï¼Œä¸èƒ½æ­£ç¢ºé‹ä½œçš„å•é¡Œ\
  Fix the screen backup mechanism of visio screen was broken for wide/tall screens and resizing screen

* ä¿®æ­£ Xover åˆ—è¡¨é …ç›®åœ¨æŸäº›æ“ä½œå¾Œçš„é¡¯ç¤ºæ¨£å¼ä¸æ­£ç¢ºçš„å•é¡Œ\
  Fix incorrect appearance of Xover list items after certain operations
  
  ç¾åœ¨å–®ä¸€é …ç›®çš„é¡¯ç¤ºæœ‰æ‰€æ›´å‹•æ™‚ï¼Œæœƒä¸€å¾‹é‡æ–°ç¹ªè£½æ­¤é …ç›®ã€‚\
  Now the redrawing of the entire item is always performed when the display of the item alters.

* ä¿®æ­£ç·¨è¼¯å™¨çš„æ¸¸æ¨™åœ¨ç©ºè¡Œæˆ–åªæœ‰ç©ºç™½çš„è¡Œçš„å‰ä¸€è¡Œè¡Œå°¾æ™‚ï¼ŒæŒ‰ä¸‹ <kbd>Del</kbd> ç„¡æ•ˆçš„å•é¡Œ\
  Fix <kbd>Del</kbd> not worked at the end of a line above an empty or space-only line

* ä¿®æ­£ç·¨è¼¯å™¨çš„æ¸¸æ¨™ä½æ–¼éæª”æ¡ˆç¬¬ä¸€è¡Œçš„ç•«é¢ç¬¬ä¸€è¡Œçš„è¡Œé¦–æ™‚ï¼ŒæŒ‰ä¸‹å€’é€€éµæœƒå°è‡´ç¨‹å¼å´©æ½°çš„å•é¡Œ\
  Fix crash when pressing backspace at the beginning of the topmost line which is not the beginning of a file in the editor

#### v3.0.0-alpha.1

* ä¿®æ­£åœ¨é«˜è¢å¹•ä¸‹ï¼Œé–±è®€æ–‡ç« æ™‚é€²å…¥ä¸¦é€€å‡ºä½¿ç”¨è€…åˆ—è¡¨ï¼Œå¯èƒ½æœƒç”¢ç”Ÿæš«æ™‚ç”šè‡³æ°¸ä¹…çš„ç„¡æ•ˆæ–‡ç« é …ç›®çš„å•é¡Œ\
  Fix possible generation of temporary or even persistent corrupted article entries when the user enters and exits the online user list while using a tall screen

* ä¿®æ­£å°‡ç·šä¸Šä½¿ç”¨è€…è‡ªå‹•åœæ¬Šæ‰€ä½¿ç”¨çš„å‡½å¼ï¼ˆ`remove_perm()`ï¼‰åªæœƒå°‡ä½¿ç”¨è€…çš„å°ç³»çµ±å…§çš„å‰ 1750ï¼ˆ`MAXBOARD/4`ï¼‰å€‹çœ‹æ¿çš„å¯«å…¥æ¬Šé™ç§»é™¤çš„å•é¡Œ\
  Fix the function for automatically suspending online users (`remove_perm()`) only removed their write permission of the first 1750 (`MAXBOARD/4`) boards in the system

* ä¿®æ­£ä¿¡ä»¶åˆ—è¡¨ä¸­çš„ tag è¨˜è™Ÿåœ¨ç•«é¢é‡ç¹ªå¾Œæœƒæ¶ˆå¤±çš„å•é¡Œ\
  Fix the tag marks in the mail list disappeared after redraws

* ä¿®æ­£ç¾¤çµ„åå–®æœå°‹ï¼ˆ`list_search()`ï¼‰çš„ç›®æ¨™ä¸åœ¨ç¬¬ä¸€é æ™‚æœƒè·³åˆ°éŒ¯èª¤é …çš„å•é¡Œ\
  Fix the issue that the searching function for the contact group list (`list_search()`) jumped to the wrong item when the target is not in the first page

* ä¿®æ­£äº† BBS-Lua èˆ‡ BBS-Ruby çš„å•é¡Œã€‚\
  Fix issues about BBS-Lua and BBS-Ruby

  è©³ç´°çš„å•é¡Œä¿®æ­£å¯è¦‹ï¼š\
  For details of fixed issues, please refer to:\
  https://github.com/ccns/dreambbs/pull/61

  #### (v3.1.0-rc.1)

  BBS-Ruby ç¾å·²ç›¸å®¹æ–¼ mruby 3.0.0\
  BBS-Ruby is now compatible with mruby 3.0.0

  BBS-Ruby v0.3-DL-2 å¾Œåˆå¼•å…¥äº†éƒ¨ä»½ä¿®æ­£\
  Some fixes are also introduced after BBS-Ruby v0.3-DL-2
    * (**TODO**: Update changelog at https://github.com/ccns/bbs-ruby)

* æ”¹å–„å¯µç‰©é›éŠæˆ²çš„ç¨‹å¼ç¢¼èˆ‡ä¿®æ­£è«¸å¤šé‚è¼¯éŒ¯èª¤\
  Refine the code of the digital pet game and fix many logical errors

  è©³æƒ…è«‹è¦‹ï¼š\
  For details, please refer to:\
  https://github.com/ccns/dreambbs/pull/61

  * (v3.1.0-rc.1) ä¿®æ­£å¾©æ´»æ™‚æ•¸å€¼æ¸…é›¶çš„éŒ¯èª¤ã€‚æ­¤è¡Œç‚ºéåŸä½œæ„åœ–ã€‚\
    (v3.1.0-rc.1) Fix resurrection zeroing out ability values. This behavior was not intended from the original version.

* ä¿®æ­£ `utmp-dump` å…ˆå‰ä»¥ `getopt()` é‡å¯«çš„å‘½ä»¤åˆ—åƒæ•¸è™•ç†ï¼Œæœƒå°‡çµ¦å®šçš„ä»»æ„åƒæ•¸çš†èª¤åˆ¤ç‚ºä¸åˆæ³•çš„å•é¡Œ\
  Fix the rewritten command-line option parsing of `utmp-dump` mistook any given options as invalid

#### v3.0.0

* ä¿®æ­£æ–‡ç« è½‰ç¶ æ™‚é–“è®Šç‚ºä¸Šæ¬¡æ¨æ–‡æ™‚é–“çš„å•é¡Œ\
  Fix the date of article reposting became the date of the last comment

* ä¿®æ­£å¼µçˆ¸é—œéµå­—çš„åµæ¸¬æœƒç”¢ç”Ÿæœªå®šç¾©çµæœï¼Œé€ æˆé—œéµå­—è¢«éš¨æ©Ÿå…è¨±çš„å•é¡Œ\
  Fix the Zhangba pattern matching produced undefined result and wrongly, randomly allowing some patterns

* ä¿®æ­£ rxvt å¼çš„ <kbd>Ctrl</kbd>-æ–¹å‘éµè¢«èª¤èªç‚º <kbd>Shift</kbd>-æ–¹å‘éµçš„å•é¡Œ\
  Fix rxvt-style <kbd>Ctrl</kbd>-arrow keys were misinterpreted as <kbd>Shift</kbd>-arrow keys

* ä¿®æ­£å¾ <kbd>Ctrl</kbd>-<kbd>Z</kbd> é¸å–®é›¢é–‹æœƒè·³å‡ºç›®å‰çœ‹æ¿çš„é€²æ¿ç•«é¢çš„å•é¡Œ\
  Fix exiting from the <kbd>Ctrl</kbd>-<kbd>Z</kbd> menu triggered the welcome screen of the current board

* ä¿®æ­£è¸¢é™¤å…ˆå‰çš„é‡è¤‡é€£ç·šæ™‚ï¼Œè¸¢äººçš„ pid è¢«èª¤ç•¶æˆè¢«è¸¢çš„ pid è¨˜éŒ„\
  Fix the kicker session's pid wrongly logged as the kicked session's pid when the previous session is kicked due to multi-session

* ä¿®æ­£ `mailpost` æœƒå°‡æ–‡ç« åŠ åˆ°æ–‡ç« åˆ—è¡¨ä¸­çš„ç½®åº•æ–‡ç« ä¸‹æ–¹çš„å•é¡Œ\
  Fix `mailpost` inserted articles after bottomed posts in the article list

#### v3.1.0-rc.1

* ä¿®æ­£ä½¿ç”¨ `ulist_fromchange()` ç·¨è¼¯ä½¿ç”¨è€…ä¾†æºæœƒé€ æˆç·©è¡å€æº¢å‡ºçš„å•é¡Œ\
  Fix buffer overflow when editing user's location info using `ulist_fromchange()`

* ä¿®æ­£å…·èª¤å°æ€§çš„å¤¢å¹£äº¤æ˜“ç´€éŒ„\
  Fix misleading logs for exchanging the Dream tokens

* ä¿®æ­£ `pmore` è¼‰å…¥ç¬¬ä¸€è¡Œé”åˆ° 2GiB (2<sup>31</sup> ä½å…ƒçµ„) æˆ–æ›´é•·çš„ä»»ä¸€æ–‡ç« æ™‚æœƒå´©æ½°çš„å•é¡Œ\
  Fix the issue that `pmore` crashed when loading any article with the first line reached 2GiB (2<sup>31</sup> Bytes) or longer

* ä¿®æ­£æ­¤å‰å¼•å…¥çš„ MapleBBS 3.10-itoc å¼ `more` åœ¨æª”æ¡ˆå¤§å°é”åˆ° 40.96MiB (2<sup>32</sup> / 100 ä½å…ƒçµ„) æˆ–æ›´å¤§æ™‚ï¼Œé–±è®€é€²åº¦çš„ç™¾åˆ†æ¯”é¡¯ç¤ºéŒ¯èª¤çš„å•é¡Œ\
  Fix the issue that, in the MapleBBS 3.10-itoc style `more`, a wrong reading progress percentage would be shown when the file reached 40.96MiB (2<sup>32</sup> / 100 bytes) or larger

* ä¿®æ­£å…§éƒ¨è™•ç† 64-bit è³‡æ–™æ™‚çš„è£åˆ‡å•é¡Œ\
  Fix truncation issues of internal handling of 64-bit data

#### `master`

* ä¿®æ­£å¯é€ æˆå¼·åˆ¶é–±è®€å…¬å‘Šæ¿ä¹‹åˆ¤æ–·éŒ¯èª¤çš„çœ‹æ¿èˆ‡æœ€æ–°æ–‡ç« çš„æœ€å¾Œæ›´æ–°æ™‚é–“çš„æ½›åœ¨ä¸åŒæ­¥\
  Fix the potential desync of the latest update time between the board and the latest article which could cause wrong judgment for enforcing the reading of the announcement board

â€¦â€¦ ä»¥åŠè¨±å¤šå…¶å®ƒè¼ƒé›£é‡åˆ°çš„ undefined behavior å•é¡Œ (è©³è¦‹ commit ç´€éŒ„)\
â€¦â€¦ and a lot of rather rare undefined behavior issues (see commit log for details)

### å°ˆæ¡ˆéƒ¨å±¬å·¥å…·æ”¹è®Š Project Deployment Tool Changes

#### v2.1-rc1

+ Make è…³æœ¬æ–°å¢äº†è¨­å®šè‡ªå‹•æ¨å°æ©Ÿåˆ¶ï¼Œå¯æ¨æ¸¬ Unix ä½¿ç”¨è€… UIDã€GIDã€å®¶ç›®éŒ„ç­‰ç­‰çš„è¨­å®šã€‚\
  Add configuration deduction mechanism to the Make script which can deducing configurations such as Unix user's UID, GID, and home directory

+ ç¾åœ¨æœƒè‡ªå‹•è¨­å®šå®‰è£çš„æª”æ¡ˆçš„æ“æœ‰è€…èˆ‡æ¬Šé™ã€‚\
  The owner and permission for install files are now configurated automatically.

+ å·²å¯ç”¨ CMake å»ºç½® DreamBBSã€‚\
  DreamBBS can now be built with CMake.

  **BSD Makefile æª”æ¡ˆå·²è¢«æ£„ç”¨ï¼Œå°‡åœ¨ v3.1 æ™‚è¢«ç§»é™¤ã€‚è«‹æ”¹ç”¨ CMake å»ºç½®æœ¬å°ˆæ¡ˆã€‚**\
  **BSD Makefiles are now deprecated and will be removed in v3.1. Please build this project with CMake instead.**

+ `wsproxy` æ¨¡çµ„ä¸å†éœ€è¦ `vstruct` å‡½å¼åº«ã€‚\
  The `wsproxy` module no longer requires the library `vstruct`.

  æ­¤ä¿®æ”¹å·²ç§»æ¤å› PttBBSï¼š\
  This change has been backported to PttBBS:\
  https://github.com/ptt/pttbbs/pull/87

#### v3.0.1

- ç§»é™¤å°ˆæ¡ˆä¸­ Travis CI çš„è¨­å®šæª”\
  Remove the configure file for Travis CI from the project

  + (v3.1.0-rc.1) å·²æ”¹ç”¨ GitHub Actions ä¾†ç”¢ç”Ÿå°ˆæ¡ˆå»ºç½®æ˜¯å¦é †åˆ©çš„è³‡è¨Šã€‚\
    (v3.1.0-rc.1) The build status is now generated with GitHub Actions instead.

#### v3.1.0-rc.1

+ DreamBBS GitHub WIKI é é¢ç¾å·²å‘ `wiki` åˆ†æ”¯è‡ªå‹•åŒæ­¥ã€‚\
  Now the DreamBBS GitHub WIKI page has been auto syncing to the `wiki` branch.

+ æ–°å¢ç”¨æ–¼ `bbs-sshd` çš„ systemd unit æª”\
  Add systemd unit file for `bbs-sshd`

### ç¨‹å¼æ¶æ§‹æ”¹è®Š Program Architecture Changes

#### v2.1-rc1

- ç§»é™¤æœªä½¿ç”¨çš„ WindTop BBS å¼æˆ‘çš„æœ€æ„›ç³»çµ± (`Favorite`)\
  Remove unused WindTop-BBSâ€“style favorite system (`Favorite`)

  ç›®å‰ä½¿ç”¨çš„æ˜¯é¡ä¼¼ MapleBBS-itoc çš„æˆ‘çš„æœ€æ„›ç³»çµ±ã€‚\
  The system currently in use is MapleBBS-itocâ€“like favorite system.

+ å¯é€éå®šç¾© macro `NO_SO` ç‚º `1` ä»¥ä¸ä½¿ç”¨å‹•æ…‹è¼‰å…¥å‡½å¼åº«\
  It is possible to disable dynamic loaded libraries by defining the macro `NO_SO` to `1`

+ å¼·åŒ–å‹åˆ¥å®‰å…¨\
  Enhance type safety

  åŒ…å«ï¼šä»¥ `union` å–ä»£é ˆæ‰‹å‹•è½‰å‹çš„çµæ§‹æˆå“¡ï¼ˆå¦‚ `KeyFunc`ã€`MENU`ã€ç­‰ï¼‰ï¼Œåš´æ ¼å¼•å…¥æ¨™é ­æª”ï¼Œç­‰ç­‰ã€‚\
  Including: Replace manually type-casted structure members with `union` (for `KeyFunc`, `MENU`, etc.), enforce header inclusions, etc.

+ æ”¯æ´ä½¿ç”¨å¸¶æœ‰ GCC æ“´å……èªæ³•çš„ C++ æ¨¡å¼ç·¨è­¯\
  Support compilation with C++ mode with GCC extensions

#### v3.0.0-alpha.1

+ ç¾å·²å®Œå…¨æ”¯æ´ IPv6ã€‚\
  IPv6 is now fully supported.

  **ç”±æ–¼è³‡æ–™çµæ§‹ `UTMP` å·²æ›´æ”¹ï¼Œè«‹å‹™å¿…ä½¿ç”¨ç³»çµ±æ®¼å±¤å‘½ä»¤ `ipcrm` é‡é–‹ SHMï¼ˆå…±ç”¨è¨˜æ†¶é«”ï¼‰ã€‚**\
  **Please reload the SHM (shared memory) using system shell command `ipcrm`, since the data structure `UTMP` has been modified.**

  ç›¸é—œç¨‹å¼å·²å…¨é¢æ”¹ç”¨ `getaddrinfo()`ã€‚\
  Relevant codes now use `getaddrinfo()` instead.

  `lib/dns.c` äº¦å·²å¯¦ä½œ IPv6 åœ°å€ä¹‹ AAAA ç´€éŒ„çš„ DNS åæŸ¥ã€‚\
  DNS lookup for AAAA records of IPv6 addresses is implemented in `lib/dns.c` as well.

  * (v3.0.0) ä¿®æ­£ä¼ºæœå™¨å¯æä¾› IPv6 é€£ç·šæ™‚å¯èƒ½åƒ…æä¾› IPv4 é€£ç·šçš„å•é¡Œ
    (v3.0.0) Fix the issue that only IPv4 connections may have been provided by the server even when there were available IPv6 connections

+ `vkey()` æŒ‰éµè¼¸å…¥ç³»çµ±å·²åŠ å…¥å»¶æ™‚åˆ¤æ–·æ©Ÿåˆ¶ã€‚\
  The delayed key determination mechanism is implemented in the `vkey()` key input system.

  ç¾åœ¨ä¸€å¾‹å®šç¾© `TRAP_ESC` ä»¥æ­£ç¢ºè™•ç†è¢« `Esc` ä¸­æ–·çš„ä¸ç¢ºå®šæ˜¯å¦å®Œæ•´çš„æŒ‰éµåºåˆ—ç¢¼ã€‚\
  `TRAP_ESC` is now always defined to correctly handle key sequences which may not be complete.

+ `vkey()` å…§éƒ¨è™•ç† `IAC` å‘½ä»¤çš„å‡½å¼ç¾æœƒé€²è¡Œé‚Šç•Œæª¢æŸ¥
  The function for handling `IAC` commands which was used internally in `vkey()` now performs bound checking.

  * (v3.0.0) éå»å…§éƒ¨ä½¿ç”¨çš„ `iac_count()` è¢«æ£„ç”¨ï¼Œå·²æ”¹ç”¨æ–°çš„æœ‰é‚Šç•Œæª¢æŸ¥çš„ `iac_process()`ã€‚\
    (v3.0.0) The `iac_count()` which was used internally in `vkey()` has been deprecated in favor of the new bound-checking `iac_process()`.

+ å¼•é€²ç•«é¢å¤§å°åƒè€ƒåº§æ¨™ç³»çµ±\
  Introduce the Screen-Sizeâ€“Referencing Coordination System

  æ­¤åº§æ¨™ç³»ä¸­çš„å›ºå®šåº§æ¨™å€¼èƒ½éš¨ç•«é¢å¤§å°å°æ‡‰ä¸åŒçš„å¯¦éš›åº§æ¨™ã€‚\
  In this coordination system, a fixed coordination value can map to different actual coordination values depends on the screen size.

  ç¯„ä¾‹ Examples:
  - ç•«é¢åº•éƒ¨æ©«è¡Œ The bottom line of the screen: `(T_LINES_REF-1, 0)` == `(B_LINES_REF, 0)`
  - ç•«é¢ä¸­å¤® The screen center: `(T_LINES_REF/2, T_COLS_REF/2)`

  å…¶ä¸­ `T_LINES_REF`ï¼ˆå°æ‡‰ç•«é¢é«˜åº¦ï¼‰èˆ‡ `T_COLS_REF`ï¼ˆå°æ‡‰ç•«é¢å¯¬åº¦ï¼‰çš†ç‚ºå¸¸æ•¸ã€‚\
  Where `T_LINES_REF` (which maps to the screen height) and `T_COLS_REF` (which maps to the screen width) are both constants.

  å°æ­¤åº§æ¨™ç³»çµ±çš„æ›´æ·±å…¥ä»‹ç´¹ï¼Œè«‹è¦‹ï¼š\
  For a deeper introduction of the coordination system, please refer to:\
  https://github.com/ccns/dreambbs/wiki/Screen-Coordinate-System-zh_tw

  ç›®å‰ DreamBBS ä½¿ç”¨æ­¤åº§æ¨™ç³»çµ±è™•ç†ä¸»é¸å–®ã€å½ˆå‡ºå¼é¸å–®ã€ä»¥åŠ `vget()` è¼¸å…¥æ¡†åœ¨ç•«é¢å¤§å°è®Šæ›´å¾Œçš„é‡ç¹ªï¼ˆv3.0.0ï¼šç•«é¢å¤§å°è®Šæ›´å¾Œç«‹å³é‡ç¹ªï¼‰ã€‚\
  The coordination is currently used in DreamBBS for handling the redrawing of the main menu, the popup menu, and the `vget()` input field after screen resizing (v3.0.0: redraw immediately on resizing).

+ æ”¹é€²ä¸¦æ“´å…… Xover åˆ—è¡¨ç³»çµ±\
  Improve and extend the Xover list system

  **Xover åˆ—è¡¨ç³»çµ±æ‰€ä½¿ç”¨çš„ç‰¹æ®Šå€¼å®šç¾©å·²è®Šæ›´ï¼Œè«‹é‡æ–°ç·¨è­¯ã€‚**\
  **The special values used in Xover list system are reassigned, please recompile.**

  é‡æ–°è¨­è¨ˆçš„ Xover ç‰¹æ®Šå€¼åˆ†é…æ–¹å¼é¿å…äº†æ¸¸æ¨™ç§»å‹•çš„è² å€¼å•é¡Œï¼Œä¸¦å¯ç”¨å›å‚³å€¼åŒæ™‚æŒ‡å®šé‡ç¹ªèˆ‡æŒ‰éµæ“ä½œã€‚\
  The redesigned Xover special value scheme avoids the negative value issue of cursor movement and allows specifying the redraws and key operations at the same time.

  æ”¹é€²å¾Œçš„ Xover åˆ—è¡¨ç³»çµ±ä½¿ç”¨ `mmap()` ä¸€æ¬¡è¼‰å…¥æ•´å€‹åˆ—è¡¨çš„è³‡æ–™ã€‚\
  The improved Xover list system uses `mmap()` to load the data of the entire list at once.

  å¼•é€²æ–°çš„ç‰¹æ®Šå€¼ï¼ŒåŒ…å«è€Œä¸é™æ–¼ï¼š\
  New special values are introduced, including but not limited to:
  - `XO_REL + diff`: ç›¸å°ç§»å‹• Relative move
  - (v3.0.0:)
  - `XO_SCRL + move`: è¡Œæ²å‹• Scroll by rows
  - `XO_CUR + diff`: é‡ç¹ªå–®é …ä¸¦ç›¸å°ç§»å‹• Redraw a single item and relative move
  - `XO_POSF + key`: è¡¨ç¤ºæŒ‰éµå°æ‡‰çš„å›å‘¼å‡½å¼æœ‰ä½ç½®åƒæ•¸ Specify that the callback function for the key has a position parameter
  - (v3.1.0-rc.1:)
  - `XO_RS + (RS_*)`: ä¸»é¡Œå¼é–±è®€åŠŸèƒ½ Thread reading functionality

  æœ‰é—œ Xover åˆ—è¡¨ç³»çµ±è®Šæ›´å‰å¾Œçš„è©³ç´°èªªæ˜ï¼Œè«‹è¦‹ï¼š\
  For details for Xover list system before and after the change, please refer to:\
  https://github.com/ccns/dreambbs/wiki/Xover-List-System-zh_tw

  æœ‰é—œè©³ç´°è®Šæ›´çš„ä»‹ç´¹ï¼Œè«‹è¦‹ï¼š\
  For the introduction of the changes in detail, please refer to:\
  https://github.com/ccns/dreambbs/pull/61

+ æ”¹é€²ä¸¦æ“´å……ä¸»é¸å–®ç³»çµ±ï¼Œä½¿å…¶å®ƒå¤–è§€ç›¸ä¼¼çš„é¸å–®èƒ½å…±ç”¨å…¶å‡½å¼\
  Improve and extend the main menu system to make the functions able to be reused for other menu with similar appearance

  æœ‰é—œä¸»é¸å–®çš„è©³ç´°è¡Œç‚ºè®Šæ›´ï¼Œè«‹è¦‹ï¼š\
  For details for behavior changes of the main menu, please refer to:\
  https://github.com/ccns/dreambbs/pull/61

  #### (v3.0.0)
  
  **ä¸»é¸å–®ç³»çµ±èˆ‡ WindTop BBS çš„å½ˆå‡ºå¼é¸å–®ç³»çµ±æ‰€ä½¿ç”¨çš„ç‰¹æ®Šå€¼å®šç¾©å·²è®Šæ›´ï¼Œè«‹é‡æ–°ç·¨è­¯ã€‚**\
  **The special values used in the main menu system and WindTop BBS popup menu system are reassigned, please recompile.**

  å°‡ä¸»é¸å–®ç³»çµ±èˆ‡ WindTop BBS çš„å½ˆå‡ºå¼é¸å–®ç³»çµ±æ‰€ä½¿ç”¨çš„ç‰¹æ®Šå€¼æ•´åˆç‚ºä¸€\
  Merge the special values used for the main menu system and the WindTop BBS popup menu system

  é¸å–®ç³»çµ±çš„å…§éƒ¨ç¨‹å¼ä¸å†ä½¿ç”¨ WindTop BBS å½ˆå‡ºå¼é¸å–®çš„ `POPUP_*` å·¨é›†ã€‚\
  The `POPUP_*` macros for WindTop BBS popup menu are no longer used in the internal code of the menu systems.

  æ”¹å¯«ä¸»é¸å–®ä»¥ç¬¦åˆ Xover æ¶æ§‹ï¼Œä¸¦å°‡ä¸€éƒ¨ä»½å‘½ä»¤æ”¹æˆèˆ‡ Xover å‘½ä»¤ç›¸åŒ\
  Rewrite the main menu to be compatible with Xover architecture. Some commands for main menu were changed to be consistent with Xover commands.

  æœ‰é—œä¸»é¸å–®ç³»çµ±çš„ç‰¹æ®Šå€¼è®Šæ›´å‰å¾Œçš„è©³ç´°èªªæ˜ï¼Œè«‹è¦‹ï¼š\
  For details for the special values used in main menu before and after the change, please refer to:\
  https://github.com/ccns/dreambbs/wiki/Menu-Systems-zh_tw

+ æ”¹é€²è½‰ä¿¡ç¨‹å¼ (`innbbsd`) çš„æ™‚é–“æ ¼å¼è§£æé‚è¼¯ (`parse_date()`)ï¼Œä½¿ä¹‹èƒ½è™•ç† RFC-1123 æ‰€å…è¨±çš„é™¤æ–‡å­—æ™‚å€èˆ‡ä»»æ„æ‹¬è™Ÿå¤–çš„å…¶å®ƒæ™‚é–“æ ¼å¼\
  Improve the date parsing logic (`parse_date()`) of the internet article sending/receiving program (`innbbsd`) to make it handles other date formats permitted by RFC-1123 other than the time zone texts and arbitrary parentheses

+ ç¾åœ¨ç”¨ GNU C æˆ– ISO C++11 ç·¨è­¯æ™‚ï¼Œå¯ä»¥æª¢æŸ¥å¾ DSOï¼ˆå‹•æ…‹è¼‰å…¥ç‰©ä»¶ï¼‰å‡½å¼åº«è¼‰å…¥çš„ç‰©ä»¶çš„å‹åˆ¥æ˜¯å¦æ­£ç¢ºã€‚\
  Now the type correctness of objects from DSO (dynamic shared object) libraries can be checked when compiling with GNU C or ISO C++11.

+ æ”¯æ´ DSO å‡½å¼åº«çš„ç†±æ’æ‹”\
  Support hot swapping of DSO libraries

  æœ¬åŠŸèƒ½å…è¨±åœ¨å‡½å¼å®£å‘Šæœªè®Šæ›´çš„å‰æä¸‹ï¼Œç›´æ¥å–ä»£å®‰è£çš„å‡½å¼åº«æª”æ¡ˆï¼Œä¸å¿…é‡æ–°å•Ÿå‹• `bbsd` å°±èƒ½ä½¿ç·¨è­¯ç‚º DSO å‡½å¼åº«çš„ç¨‹å¼ä¸­çš„è®Šæ›´ç”Ÿæ•ˆã€‚\
  This feature allows changes in programs compiled as DSO libraries to become effective by directly replacing the installed library file without relaunching `bbsd`.

  åœ¨ `dreambbs.conf` ä¸­å®šç¾© `DL_HOTSWAP` ä»¥å•Ÿç”¨æ­¤åŠŸèƒ½ã€‚\
  Define `DL_HOTSWAP` in `dreambbs.conf` to enable this feature.

  å¦‚æœè¨­å®šäº† Makefile è®Šæ•¸ `NO_SO` ä»¥å°‡ `so/` ä¸‹çš„ç¨‹å¼ç·¨è­¯ç‚ºéœæ…‹é€£çµå‡½å¼åº«ï¼Œå‰‡æ­¤åŠŸèƒ½ç„¡æ•ˆã€‚\
  This feature is disabled if Makefile variable `NO_SO` is set to build programs under `so/` as static-linking libraries.

  **æœ¬åŠŸèƒ½æœƒä½¿ DSO å‡½å¼åº«ä¸­çš„å…¨åŸŸè®Šæ•¸åœ¨æ¯æ¬¡é€²å…¥å‡½å¼åº«çš„ä¸»å‡½å¼æ™‚é‡ç½®ï¼Œè«‹æ³¨æ„ä½¿ç”¨ã€‚**\
  **This feature makes global variables in DSO libraries reset every time the main library function is entered, please use it with caution.**

+ å°‡ `util/account.c` ä¸­çš„çœ‹æ¿åˆ†é¡å€å»ºç«‹å·¥ä½œç§»è‡³ `util/acpro.c`ï¼ˆWindTop BBS ç”¨æ–¼å»ºç«‹å°ˆæ¥­è¨è«–å€çš„ç¨‹å¼ï¼‰ä¸­\
  Move the task of building board category area from `util/account.c` to `util/acpro.c` (The program for building professional board area in WindTop BBS)

  **åŸ·è¡Œ `bbsd` å‰ä¸å†éœ€è¦åŸ·è¡Œ `account`ã€‚è«‹å°‡åŸ·è¡Œ `bbsd` ç”¨çš„è…³æœ¬ä¸­çš„ `account` åŸ·è¡Œå‘½ä»¤ç§»é™¤ã€‚**\
  **`account` is no longer needed to run before `bbsd` is launched. Please remove the command for running `account` in scripts for launching `bbsd`**

  ç§»é™¤çœ‹æ¿åˆ†é¡å€åœ¨ä¸€å¤©çš„ç‰¹å®šæ™‚æ®µä¸­ä¸èƒ½é‡å»ºçš„é™åˆ¶\
  Lift the limitation that the board category area should not be rebuilt in the certain time period of a day

#### v3.0.0

+ æ–°å¢ä¸é ˆä½¿ç”¨ç³»çµ±æ®¼å±¤ä»‹é¢çš„ç³»çµ±ç¨‹å¼å‘¼å«å‡½å¼å–ä»£éƒ¨åˆ† `system()` å‡½å¼å‘¼å«ï¼Œæ”¹å–„å®‰å…¨æ€§\
  Add new system-programâ€“calling functions which do not depend on the system shell to replace `system()` function calls to improve security

+ æ”¯æ´åœ¨ 64 ä½å…ƒç’°å¢ƒä¸‹åŸç”Ÿç·¨è­¯è€Œä¸å½±éŸ¿è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ˆå±€\
  Support native compilation under 64-bit environment without disrupting the memory layout of data structures

  **ç”±æ–¼è³‡æ–™çµæ§‹ `UCACHE` ä¸­çš„ä¸€äº›è³‡æ–™æ¬„ä½å®šç¾©å·²æ›´æ”¹ï¼Œè«‹å‹™å¿…ä½¿ç”¨ç³»çµ±æ®¼å±¤å‘½ä»¤ `ipcrm` é‡é–‹ SHMï¼ˆå…±ç”¨è¨˜æ†¶é«”ï¼‰ã€‚**\
  **Please reload the SHM (shared memory) using system shell command `ipcrm`, since some data fields in the data structure `UCACHE` has been redefined.**

  ä½¿ç”¨å›ºå®šå¯¬åº¦çš„æ•´æ•¸å‹åˆ¥ä½œç‚ºç¡¬ç¢Ÿä¸Šèˆ‡ SHMï¼ˆå…±ç”¨è¨˜æ†¶é«”ï¼‰ä¸­å„²å­˜çš„è³‡æ–™çµæ§‹çš„æˆå“¡\
  Use fixed-width integer types for structure members for data structures stored on hard disk or in SHM (shared memory)

  åœ¨ 64 ä½å…ƒç’°å¢ƒä¸­ï¼Œå…§éƒ¨æœƒä½¿ç”¨ 64 ä½å…ƒå¯¬çš„ `time_t` è™•ç†æ™‚é–“ï¼Œè€Œå›ºå®šå¯¬åº¦çš„æ™‚é–“å‹åˆ¥åƒ…æœƒåœ¨ä¸Šè¿°æƒ…æ³ä½¿ç”¨ã€‚\
  64-bit `time_t` is used for internal time processing in 64-bit environment, while fixed-width time types is used only for the condition above.

  æ”¹å¯«ç¡¬ç¢Ÿä¸Šèˆ‡ SHM ä¸­å„²å­˜çš„è³‡æ–™çµæ§‹ä¸­çš„æŒ‡æ¨™ç‚ºç´¢å¼•å€¼\
  For data structures stored on hard disk and in SHM, change their raw pointers to integer indexes

#### v3.1.0-rc.1

* æ”¹å–„å° Telnet å”è­°çš„è™•ç†\
  Improve the handling of the Telnet protocol

  åŒ…å«ï¼šå…è¨± `IAC` å‘½ä»¤å¤¾é›œåœ¨æ™®é€šè¼¸å…¥ä¸­ï¼Œæ¸›å°‘åˆå§‹åŒ–æ™‚çš„ç­‰å¾…ï¼Œé˜²æ­¢åˆå§‹åŒ–æ™‚æ¨æ£„ä»»ä½• `IAC` å‘½ä»¤ï¼Œé¡¯å¼è¦æ±‚ BBS ç€è¦½å™¨æ¥æ”¶ 8-bit è³‡æ–™ï¼Œç­‰ç­‰ã€‚\
  Including: Allow `IAC` commands to mix with normal inputs, reduce waiting on initialization, prevent dropping any `IAC` commands during initialization, explicitly require the BBS browser to receive 8-bit data, etc.

## èˆ‡ç¨‹å¼é¢¨æ ¼ç›¸é—œçš„æ”¹è®Š Coding-Styleâ€“Related Changes

#### v3.0.0-alpha.1

+ å°‡æœƒå­˜å…¥ç¡¬ç¢Ÿçš„è³‡æ–™çµæ§‹çš„å®šç¾©åŠ ä¸Š `DISKDATA` è¨»è§£ï¼Œå°‡å…¶å®ƒæœƒæ”¾å…¥ SHMï¼ˆå…±ç”¨è¨˜æ†¶é«”ï¼‰çš„è³‡æ–™çµæ§‹çš„å®šç¾©åŠ ä¸Š `SHMDATA` è¨»è§£ï¼Œæ–¹ä¾¿æœªä¾†è³‡æ–™çµæ§‹è½‰æ›æ™‚çš„åƒè€ƒ\
  Add `DISKDATA` comments to the definition of data structures which are stored on the hard disk and `SHMDATA` comments to the definition of other data structures which are loaded into the SHM (shared memory) for the reference of future data structure migrations

+ é™åˆ¶ä½å…ƒé‹ç®—çš„ä½¿ç”¨ï¼Œä»¥æ”¹é€²ç¨‹å¼å¯è®€æ€§\
  Limit the use of binary operations to improve code readability

  ç¾ä»£çš„ç·¨è­¯å™¨æœƒå°‡éƒ¨ä»½ä¹˜é™¤é‹ç®—æ›¿æ›æˆä½å…ƒé‹ç®—ï¼Œä¸éœ€è¦æ‰‹å‹•åœ¨ç¨‹å¼ç¢¼ä¸­æ›¿æ›ã€‚\
  Since modern compilers substitute some multiplications/divisions with binary operations, there is no need to substitute them in the code by hand.

+ å¼·åŒ– `const` é™å®šè©çš„ä½¿ç”¨\
  Enforce the use of `const` qualifier

+ æ–°å¢ macros ä»¥ä½¿ç”¨ ISO C99 èˆ‡ ISO C++11 ä¸­åŠŸèƒ½ç›¸è¿‘ä½†å½¢å¼ä¸åŒçš„èªæ³•\
  Add macros to use syntaxes with the similar functionality but in different forms between ISO C99 and ISO C++11

#### v3.0.0

- ç§»é™¤æ¯«ç„¡æ„ç¾©åœ°å¯«æ­»äº†çš„é¡¯å¼åœ°æŒ‡å®šäº†çš„é™£åˆ—å¤§å°\
  Remove unmeaningfully hardcoded explicit array size

* ä¿®æ­£ç”¨ `#if 0` å–ä»£æ¨™æº–è¨»è§£èªæ³•ç•¶ä½œæ–‡å­—è¨»è§£çš„å•é¡Œ\
  Fix `#if 0` replaced the standard comment syntaxes for text comments

#### v3.1.0-rc.1

* å°‡ `maple/acct.c` ä¸­æœªä½¿ç”¨ `bbsd` å…¨åŸŸè®Šæ•¸çš„å‡½å¼ç§»è‡³ `lib/acct.c`ï¼Œä¸¦èˆ‡ `util/` ä¸­çš„å¹¾ä¹é‡è¤‡çš„å‡½å¼åˆä½µ\
  Move functions free of `bbsd` global variables in `maple/acct.c` to `lib/acct.c` and merge these functions with the near duplications in `util/`

* æ¨™æº–åŒ– macro å®šç¾©çš„å½¢å¼\
  Normalize the forms of macro definitions

## çµ±è¨ˆè³‡è¨Š Statistic Information

ä»¥ [9b3e98f9d7](https://github.com/ccns/dreambbs/commit/9b3e98f9d7fe418f2b67212e546b5121b9efca7d) ç‚ºåŸºæº–ã€‚

æœ¬ç™¼ä½ˆç‰ˆæœ¬çš„å°ˆæ¡ˆå¤§å° The project size of this release:
- æª”æ¡ˆæ•¸ Files: 233
- è¡Œæ•¸ Lines: 106235
- ä½å…ƒçµ„å¤§å° Byte size: 2,798,011 B (â‰ˆ 2.67 MiB)

èˆ‡ v2.0.0 çš„ç¨‹å¼ç¢¼å·®ç•°ï¼ˆæ’é™¤ç©ºç™½å­—å…ƒçš„æ”¹è®Šï¼‰The code differences from v2.0.0 (excluding whitespace changes):
- Commits: 886
- ä¿®æ”¹æª”æ¡ˆæ•¸ File changed: 233 (â‰ˆ 100.0%)
- å¢åŠ è¡Œæ•¸ Line insertions: 22162 (â‰ˆ 20.9%)
- åˆªé™¤è¡Œæ•¸ Line deletions: 19311 (â‰ˆ 18.2%)
